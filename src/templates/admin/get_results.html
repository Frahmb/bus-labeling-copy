{% extends "admin/index.html" %}
{% load i18n static %}

{% block title %}Get Results | {{ site_title|default:_('Django site admin') }}{% endblock %}
{% block extrastyle %}
    {{ block.super }}
    {{ form.media }}
    <style>
        .form-row {
            padding:  4px  0;
            width:  100%;
            border-bottom: none;
        }

        .form-row label {
            padding-right:  0.5em;
            line-height:  2em;
            font-size:  1em;
            clear: both;
            color: #333;
        }

        .form-row input, .form-row select {
            clear: both;
            margin:  8px;
            width:  100%;
            box-sizing: border-box;
        }

        .loading {
            cursor: wait !important; 
        }
        #loading-spinner {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            background-color: rgba(255, 255, 255, 0.8);
        }
        #spinner-container {
            position: absolute;
            top: 30%;
            left: 50%;

        }
       
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #spinner-container::after {
            content: "";
            display: block;
            width: 50px;
            height: 50px;
            margin: auto;
            border-radius: 50%;
            border: 5px solid #007bff; /* Blue border */
            border-top-color: transparent; /* Transparent top border */
            animation: spin 1s linear infinite; /* Spin animation */
        }        
    </style>
{% endblock %}

{% block content %}
    <form id="get-results-form" action="" method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="form-row">
            {{ form.datasets.label_tag }} {{ form.datasets }}
            {{ form.datasets.errors }}
        </div>

        <div class="form-row">
            {{ form.models.label_tag }} {{ form.models }}
            {{ form.models.errors }}
        </div>

        <div class="form-row">
            <input type="submit" value="Get Results">
        </div>
    </form>
    <div id="loading-spinner" style="display: none;">
        <div id="spinner-container"> 
            <div>
                Calculating Results...
                <br>
                <br>
            </div>
        </div>
    </div>
    <script>

        document.getElementById("get-results-form").addEventListener("submit", function() {
            
            addLoadingClass();
        });

        function addLoadingClass() {
            document.body.classList.add('loading');
            document.getElementById("loading-spinner").style.display = "block";
        }


    </script>
{% endblock %}

{% block sidebar %}{% endblock %}

